{% set units = __SELF__.units %}
{% set course = __SELF__.course %}
<h1>
    {{ course.title }}
</h1>
<h2>
    Units
</h2>
<ul>
    {% for unit in units %}
        <li>
            {% if unit.cards.count != 0 %}
                <a href="{{ 'cards' |page({ course_id: course.id, unit_id: unit.id }) }}">
                    {{ unit.title }}
                </a>
            {% else %}
                {{ unit.title }}
            {% endif %}

            {% if unit.children %}
            <ul>
                {% for parent_unit in unit.children %}
                <li>
                    <a href="{{ 'cards'|page({ course_id: course.id, unit_id: parent_unit.id }) }}">
                        {{ parent_unit.title }}
                    </a>
                </li>
                {% endfor %}
            </ul>
            {% endif %}
        </li>
    {% endfor %}
</ul>